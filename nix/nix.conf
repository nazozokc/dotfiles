# ========= 基本思想 =========
# ・再現性最優先
# ・速度重視
# ・experimentalは怖がらない
# ・Arch環境を汚さない

# ---------- 必須 ----------
experimental-features = nix-command flakes
accept-flake-config = true

# ---------- 並列・速度 ----------
max-jobs = auto
cores = 0

# substituters（公式 + キャッシュ最大活用）
substituters = https://cache.nixos.org
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=

# ---------- 安全＆一貫性 ----------
sandbox = true
require-sigs = true
warn-dirty = false

# ---------- nix store 管理 ----------
auto-optimise-store = true
keep-outputs = true
keep-derivations = true

# ---------- Arch共存向け ----------
# /usr を汚さない
build-users-group = nixbld

# ---------- ログ・デバッグ ----------
log-lines = 50
show-trace = true

# ---------- 評価高速化 ----------
eval-cache = true

# ---------- GC（最低限） ----------
gc-keep-derivations = true
gc-keep-outputs = true

